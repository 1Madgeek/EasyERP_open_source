<div id="<%=type%>" class="dateListElement">
    <%type = type && type==='next7days'? 'Next 7 days': type%>
    <span class="dateListElementTitle <%= type ==='overdue' ? 'red' : '' %>"><%=type ? type.charAt(0).toUpperCase() + type.slice(1) : '' %><span class="countCircle"><%=' ' +data.length%></span></span>
    <% data.forEach(function(task, index){ %>
    <div data-index="<%=index%>" data-id="<%= task._id%>" class="stage-<%=(task.workflow) ? task.workflow.status.toLowerCase() : ''%> dateListItem">
        <div class="dateListCheckboxWrap">
            <label class="_customCHeckbox">
                <input type="checkbox" data-sequence="<%= task.sequence%>" <%=task.workflow.status === 'Done' ? 'checked' : ''%> value="<%=task._id%>" class="checkbox"/>
                <span></span>
            </label>
        </div>
        <div class="dateListBody">
            <div class="dateListHeader">
                <span data-color="<%=(task.category) ?task.category.color : ''%>" class="_tagSmall"><%=(task.category) ? task.category.name : ''%></span>
            </div>

            <div class="dateListDescription textEllipsis"><%=task.description%></div>

            <div class="dateListFooter">
                <!--<a href="<%=(task.contact) ? '/#easyErp/Persons/form/' + task.contact._id : (task.company) ?'/#easyErp/Companies/form/' + task.company._id : ''%>"><%=(task.contact && task.contact.name) ? task.contact.name.first + ' ' + task.contact.name.last : (task.company && task.company.name) ?  task.company.name.first : ''%></a>-->
                <span class="listFooterDate"><%=task.dueDate%></span>
                <% if (task.assignedTo){%>
                <span class="textLightGrey">for</span>
                <span class="textBlue"><%=(task.assignedTo) ?  task.assignedTo.name.first + ' ' + task.assignedTo.name.last : ''%></span>
                <% }%>
            </div>
        </div>
    </div>
    <% }) %>
</div>